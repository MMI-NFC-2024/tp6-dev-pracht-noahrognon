---
import Layout from "../../../layouts/Layout.astro";
import penguins from "../../../assets/penguins.json";
import { slugify } from "../../../utils/slug";

const speciesList = [...new Set(penguins.map((item) => item.species))].sort();

const entries = speciesList.map((species) => {
  const slug = slugify(species);
  const count = penguins.filter((item) => item.species === species).length;
  return { species, slug, count };
});
---

<Layout>
  <section class="grid gap-4">
    <h1 class="text-3xl font-semibold text-sky-200">Pingouins &ndash; rendu statique</h1>
    <p class="max-w-2xl text-sm text-slate-300">
      Ces pages sont prerendues grace a <code class="rounded bg-slate-800 px-2 py-1 text-xs">getStaticPaths</code>.
      Chaque route est generee au build pour une espece donnee.
    </p>
    <ul class="grid gap-3 sm:grid-cols-2">
      {entries.map((entry) => (
        <li class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 transition hover:border-sky-400">
          <a class="flex flex-col gap-2" href={`/penguins/rendu-statique/${entry.slug}`}>
            <span class="text-lg font-semibold text-sky-100">{entry.species}</span>
            <span class="text-xs uppercase tracking-wide text-slate-400">{entry.count} individus</span>
          </a>
        </li>
      ))}
    </ul>
  </section>
</Layout>
